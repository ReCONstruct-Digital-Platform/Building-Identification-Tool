<!-- Gathers all the JS/CSS given to field widgets and imports them -->
{{ form.media }}

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.self_similar_cluster}}: {{ form.self_similar_cluster.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id=form.self_similar_cluster.name %}
  </legend>
  {{ form.self_similar_cluster }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.has_simple_footprint}}: {{ form.has_simple_footprint.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id=form.has_simple_footprint.name %}
  </legend>
  {{ form.has_simple_footprint }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.has_simple_volume}}: {{ form.has_simple_volume.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="has_simple_volume" %}
  </legend>
  {{ form.has_simple_volume }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.num_storeys}}: {{ form.num_storeys.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="num_storeys" %}
  </legend>
  {{ form.num_storeys }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.has_basement}}: {{ form.has_basement.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="has_basement" %}
  </legend>
  {{ form.has_basement }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.site_obstructions}}: {{ form.site_obstructions.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="site_obstructions" %}
  </legend>

  {% with initial=form.site_obstructions.initial %}
    {{ form.site_obstructions }}
  {% endwith %}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.appendages}}: {{ form.appendages.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="appendages" %}
  </legend>
  {{ form.appendages }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.exterior_cladding}}: {{ form.exterior_cladding.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="exterior_cladding" %}
  </legend>
  {{ form.exterior_cladding }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.facade_condition}}: {{ form.facade_condition.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="facade_condition" %}
  </legend>
  {{ form.facade_condition }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.window_wall_ratio}}: {{ form.window_wall_ratio.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="window_wall_ratio" %}
  </legend>
  {{ form.window_wall_ratio }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.large_irregular_windows}}: {{ form.large_irregular_windows.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="large_irregular_windows" %}
  </legend>
  {{ form.large_irregular_windows }}
</fieldset>

<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.roof_geometry}}: {{ form.roof_geometry.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="roof_geometry" %}
  </legend>
  {{ form.roof_geometry }}
</fieldset>

<!-- Extra question only if eval unit has not construction year -->
{% if eval_unit.const_yr is None or eval_unit.const_yr == '' %}
<fieldset class="q-container">
  <legend class="q-header">
    <strong>Q{{form.field_ordering.new_or_renovated}}: {{ form.new_or_renovated.help_text }}</strong>
    {% include 'buildings/utils/info_modal_button.html' with modal_id="new_or_renovated" %}
  </legend>
  {{ form.new_or_renovated }}
</fieldset>
{% endif %}


<!-- Information Modals -->


<div class="modal fade" id="{{ form.self_similar_cluster.name }}" tabindex="-1" aria-labelledby="{{ form.self_similar_cluster.name }}_label" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="{{ form.self_similar_cluster.name }}_label">
          Q{{form.field_ordering.self_similar_cluster}}: Self-Similar Clusters
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div>
          <p>
            A building is part of a <strong>self-similar cluster</strong> if it close to other buildings built at the same time, 
            following the same construction methods, and using the same materials. 
            Most of the time, they will seem virtually identical copies.
          </p>
          <p>
            This is important for retrofits as a good candidate building part of a cluster creates economies of scale which 
            makes retrofitting the whole cluster more attractive than retrofitting a single building.
          </p>
          <p>
            Note: Presence of the <span class="badge text-bg-info">Multiple Addresses</span> tag makes this more likely
            as the evaluation unit could contain multiple buildings.
          </p>
          <div>
            <strong>
              Example 1:
            </strong>
            <p>
              We can see from the streetview that there is an almost identical building to the right.
              The satellite view gives a bigger picture where wee see that there seems to be a 5 building cluster.
            </p>
            <img width="500" src="{% static 'images/survey_info/q1_selfsimilar/selfsimilar_sv.jpg' %}" alt="A streetview of a building part of a self-similar cluster">
            <br>
            <img width="500" src="{% static 'images/survey_info/q1_selfsimilar/selfsimilar_sat.jpg' %}" alt="A satellite view of a building part of a self-similar cluster">
          </div>

          <div>
            <strong>
              Example 2:
            </strong>
            <p>
              Again, it is clear from the streetview image that there are multiple similar buildings.
              The satellite view shows a cluster of 4 (or 8) buildings.
            </p>
            <img width="500" src="{% static 'images/survey_info/q1_selfsimilar/selfsimilar_sv_2.jpg' %}" alt="A streetview of a building part of a self-similar cluster">
            <br>
            <img width="500" src="{% static 'images/survey_info/q1_selfsimilar/selfsimilar_sat_2.jpg' %}" alt="A satellite view of a building part of a self-similar cluster"/>
          </div>
          
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>